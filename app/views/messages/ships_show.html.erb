<div class="row">
<<<<<<< HEAD
  <br/>
  <br/>
  <br/>
  <br/>
  <br/>
	<div class="col-sm-10 col-sm-offset-1">
=======
	      <br/>
      <br/>
      <br/>
      <br/>
      <br/>
	<div class="col-sm-2">
	</div>
	<div class="col-sm-8">
>>>>>>> e13d96732411e0cc266c6590d5dfed3490dede10
	    <div class="panel panel-primary">
	          <div class="panel-heading">
	                <h4 class="panel-title">Messages received by ship id <%= params[:id] %></h4>
	          </div>
	          <div class="panel-body">
	                  <p id="notice"><%= notice %></p>
<<<<<<< HEAD
                    <div class="row">
                      <div class="col-sm-6">
    	                  <table class="table table-hover">
                          <thead>
                            <tr>
                              <th>Type</th>
                              <th>Latitude</th>
                              <th>Longitude</th>
                              <th colspan="1"></th>
                            </tr>
                          </thead>

                          <tbody>                            
                            <% locs = [] 
                              @messages.each do |message| 
                                if message.message_type != 5 
                                  locs.push(['01', Message.getLatLong(message.latitude), Message.getLatLong(message.longitude)])
                                end
                                %>
                              <tr>
                                <td><%= message.message_type %></td>
                                <td><%= if message.has_attribute?("latitude") 
                                                        message.latitude
                                                  end %>
                                </td>
                                <td><%= if message.has_attribute?("longitude") 
                                                        message.longitude 
                                                  end %>
                                </td>
                                <td><%= link_to 'Show', message %></td>
                              </tr>
                            <% end %>
                          </tbody>                          
                        </table>
                      </div>
                      <div class="col-sm-6">
                        <div id="map">
                      </div>
                    </div>
                    <p align="right">
                      <%= link_to 'Back', ships_path %>
                    </p>
                    <%= javascript_tag "locations = #{locs[0..10].to_json.html_safe};" %>
	          </div>
	      </div>         

</div>

<script>
  if(locations.length > 0){ 
    function initMap() {
      var bounds = new google.maps.LatLngBounds();

      var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 20,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      });

      var infowindow = new google.maps.InfoWindow();

      var marker, i;

      for (i = 0; i < locations.length; i++) { 
        marker = new google.maps.Marker({
          position: new google.maps.LatLng(locations[i][1], locations[i][2]),
          map: map,
          title: locations[i][1] + " , " + locations[i][2] 
        });

        //extend the bounds to include each marker's position
        bounds.extend(marker.position);

        //now fit the map to the newly inclusive bounds
        map.fitBounds(bounds);

      }
    }
  }
  </script>
=======

	                  <table class="table table-hover">
	                            <thead>
	                              <tr>
	                                <th>Type</th>
	                                <th>Repeatindicator</th>
	                                <th>MMSI</th>
	                                <th>Longitude</th>
	                                <th>Latitude</th>
	                                <th>Course Over Ground</th>
	                                <th>Ship Type</th>
	                                <th colspan="1"></th>
	                              </tr>
	                            </thead>

                            <tbody>                            <tbody>
                              <% @messages.each do |message| %>
                                <tr>
                                  <td><%= message.message_type %></td>
                                  <td><%= message.repeat_indicator %></td>
                                  <td><%= message.mmsi %></td>
                                  <td><%= if message.has_attribute?("longitude") 
                                                          message.longitude 
                                                    end %>
                                  </td>
                                  <td><%= if message.has_attribute?("latitude") 
                                                          message.latitude
                                                    end %>
                                  </td>
                                  <td><%= if message.has_attribute?("course_over_ground") 
                                                          message.course_over_ground
                                                    end %>
                                  </td>
                                  <td><%= if message.has_attribute?("ship_type") 
                                                          message.ship_type
                                                    end %>
                                  </td>
                                  <td><%= link_to 'Show', message %></td>
<!--                                   <td><%= link_to 'Edit', edit_message_path(message) %></td>
                                  <td><%= link_to 'Destroy', message, method: :delete, data: { confirm: 'Are you sure?' } %></td> -->
                                </tr>
                              <% end %>
                            </tbody>                          </table>
                          </table>
                          <p align="right">
                          	<%= link_to 'Back', ships_path %>
                          </p>
	          </div>
	      </div>         
	<div class="col-sm-2">
	</div>
</div>



>>>>>>> e13d96732411e0cc266c6590d5dfed3490dede10
